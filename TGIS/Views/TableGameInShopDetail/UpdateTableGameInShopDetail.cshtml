@using TGIS.Models
@model IEnumerable<TableGame>
@{

    ViewBag.Title = "店內桌遊管理";
    Layout = "~/Views/Shared/_LayoutShoperCenter.cshtml";
}

<h2>店內桌遊明細表</h2>
@using (Html.BeginForm())
{
<table class="table table-sm table-bordered table-hover">
    <thead>
        <tr class="table-primary">
            <th >持有</th>
            <th>桌遊名稱</th>
            <th>是否販售</th>
            <th>價格</th>
        </tr>
    </thead>
    <tbody>
        @foreach (TableGame item in Model)
        {
            @Html.Action("_GetOneDetail", new { tableGameID = item.ID, shopID = ViewBag.shopID })
        }
    </tbody>
</table>
<input type="submit" class="btn btn-info" value="儲存變更" />
}
<script>
    var isChange = false;
    $(function () {
        $("input,textarea,select").change(function () {
            isChange = true;
            $(this).addClass("editing");
        });

        $(window).bind('beforeunload', function (e) {
            if (isChange || $(".editing").get().length > 0) {
                return '更改尚未儲存，確定離開？';
            }
        })
    });
    $("input:submit").click(function () {
        $(window).unbind('beforeunload');
    });
</script>
